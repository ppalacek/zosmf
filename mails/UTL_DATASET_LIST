You can do this directly from the catalog ‚Äì basically:
*look in the column catalog for those 3 column names, group by table, and keep only tables that have all 3.*

### Db2 for z/OS

```sql
SELECT
    c.tbcreator,
    c.tbname
FROM
    sysibm.syscolumns c
WHERE
    UPPER(c.name) IN ('DBNAME','OBJNAME','PARTITION')
GROUP BY
    c.tbcreator,
    c.tbname
HAVING
    COUNT(DISTINCT UPPER(c.name)) = 3      -- all three columns exist
ORDER BY
    c.tbcreator,
    c.tbname;
```

If you only want ‚Äúnormal‚Äù tables (not views etc.), you can join SYSTABLES:

```sql
SELECT
    t.creator,
    t.name
FROM
    sysibm.systables t
JOIN
    sysibm.syscolumns c
      ON t.name     = c.tbname
     AND t.creator  = c.tbcreator
WHERE
    UPPER(c.name) IN ('DBNAME','OBJNAME','PARTITION')
    AND t.type = 'T'                      -- base table
GROUP BY
    t.creator,
    t.name
HAVING
    COUNT(DISTINCT UPPER(c.name)) = 3
ORDER BY
    t.creator,
    t.name;
```

### Db2 LUW equivalent (if you ever need it)

```sql
SELECT
    col.tabschema,
    col.tabname
FROM
    syscat.columns col
WHERE
    UPPER(col.colname) IN ('DBNAME','OBJNAME','PARTITION')
GROUP BY
    col.tabschema,
    col.tabname
HAVING
    COUNT(DISTINCT UPPER(col.colname)) = 3
ORDER BY
    col.tabschema,
    col.tabname;
```

Run this on the ‚Äúother system‚Äù and it‚Äôll tell you which table(s) have those three columns, if any.

***
Nice, that list helps a lot üôÇ
Now let‚Äôs do it in two clear steps:

---

## 1Ô∏è‚É£ On the system **where `UTL_DATASET_LIST` exists**

First get its structure:

```sql
-- structure of DB2BATC.UTL_DATASET_LIST
SELECT
    c.colno,
    c.name       AS column_name,
    c.coltype,
    c.length,
    c.scale
FROM
    sysibm.syscolumns c
WHERE
    c.tbcreator = 'DB2BATC'
    AND c.tbname = 'UTL_DATASET_LIST'
ORDER BY
    c.colno;
```

Optionally peek at the data:

```sql
SELECT *
FROM DB2BATC.UTL_DATASET_LIST
FETCH FIRST 50 ROWS ONLY;
```

From this you‚Äôll see exactly which columns it has (beyond `DBNAME`, `OBJNAME`, `PARTITION`) and roughly what the rows look like.

---

## 2Ô∏è‚É£ On the **EUPAGB** system

You‚Äôve found these candidate tables:

```text
DD2_DATASET_LIST
DD2_EAV_DATASET_LIST
DD2_EAV_DATASET_MOVE
DD2_EAV_DATASET_MOVETEMP
DD2_EAV_DATASET_MOVE_DSN
DD2_EAV_DATASET_MOVE_DSN_TEMP
DD2_EAV_DATASET_MOVE_WORK
DD2_EAV_DATASET_MOVE_WORK_TEMP
DD2_EAV_DATASET_REPORT
DD2_EAV_DATA_HIST
DD2_EAV_LISTDEF_TEMP
DD2_EAV_LISTDEF_TEMP_CAT
DD2_EAV_LISTDEF_TEMP_DSN
DD2_LISTDEF_TEMP
SYSPENDINGDDL
SYSPENDINGOBJECTS
```

### 2a) Find creators for those tables

```sql
SELECT creator, name, type
FROM   sysibm.systables
WHERE  name IN ('DD2_DATASET_LIST',
                'DD2_EAV_DATASET_LIST',
                'DD2_EAV_DATASET_MOVE',
                'DD2_EAV_DATASET_MOVETEMP',
                'DD2_EAV_DATASET_MOVE_DSN',
                'DD2_EAV_DATASET_MOVE_DSN_TEMP',
                'DD2_EAV_DATASET_MOVE_WORK',
                'DD2_EAV_DATASET_MOVE_WORK_TEMP',
                'DD2_EAV_DATASET_REPORT',
                'DD2_EAV_DATA_HIST',
                'DD2_EAV_LISTDEF_TEMP',
                'DD2_EAV_LISTDEF_TEMP_CAT',
                'DD2_EAV_LISTDEF_TEMP_DSN',
                'DD2_LISTDEF_TEMP',
                'SYSPENDINGDDL',
                'SYSPENDINGOBJECTS')
ORDER BY creator, name;
```

Then you‚Äôll know e.g. `DB2BATC.DD2_DATASET_LIST`, `DB2BATC.DD2_EAV_DATASET_LIST`, etc.

### 2b) Compare structures to `UTL_DATASET_LIST`

List all columns for those candidates:

```sql
SELECT
    c.tbcreator,
    c.tbname,
    c.colno,
    c.name   AS column_name,
    c.coltype,
    c.length,
    c.scale
FROM
    sysibm.syscolumns c
WHERE
    c.tbname IN ('DD2_DATASET_LIST',
                 'DD2_EAV_DATASET_LIST',
                 'DD2_EAV_DATASET_MOVE',
                 'DD2_EAV_DATASET_MOVETEMP',
                 'DD2_EAV_DATASET_MOVE_DSN',
                 'DD2_EAV_DATASET_MOVE_DSN_TEMP',
                 'DD2_EAV_DATASET_MOVE_WORK',
                 'DD2_EAV_DATASET_MOVE_WORK_TEMP',
                 'DD2_EAV_DATASET_REPORT',
                 'DD2_EAV_DATA_HIST',
                 'DD2_EAV_LISTDEF_TEMP',
                 'DD2_EAV_LISTDEF_TEMP_CAT',
                 'DD2_EAV_LISTDEF_TEMP_DSN',
                 'DD2_LISTDEF_TEMP')
ORDER BY
    c.tbcreator,
    c.tbname,
    c.colno;
```

Focus on the ones that have `DBNAME`, `OBJNAME`, `PARTITION`:

```sql
SELECT
    c.tbcreator,
    c.tbname,
    c.name AS column_name
FROM
    sysibm.syscolumns c
WHERE
    c.tbname IN ('DD2_DATASET_LIST',
                 'DD2_EAV_DATASET_LIST',
                 'DD2_EAV_DATASET_MOVE',
                 'DD2_EAV_DATASET_MOVETEMP',
                 'DD2_EAV_DATASET_MOVE_DSN',
                 'DD2_EAV_DATASET_MOVE_DSN_TEMP',
                 'DD2_EAV_DATASET_MOVE_WORK',
                 'DD2_EAV_DATASET_MOVE_WORK_TEMP',
                 'DD2_EAV_DATASET_REPORT',
                 'DD2_EAV_DATA_HIST',
                 'DD2_EAV_LISTDEF_TEMP',
                 'DD2_EAV_LISTDEF_TEMP_CAT',
                 'DD2_EAV_LISTDEF_TEMP_DSN',
                 'DD2_LISTDEF_TEMP')
  AND UPPER(c.name) IN ('DBNAME','OBJNAME','PARTITION')
ORDER BY
    c.tbcreator,
    c.tbname,
    c.name;
```

### 2c) Look at the data in the most promising table(s)

Once you see which table has the same column set / order as `UTL_DATASET_LIST` (very likely `DD2_DATASET_LIST` or `DD2_EAV_DATASET_LIST`), just sample the rows:

```sql
SELECT *
FROM <CREATOR>.DD2_DATASET_LIST
FETCH FIRST 50 ROWS ONLY;

-- and/or
SELECT *
FROM <CREATOR>.DD2_EAV_DATASET_LIST
FETCH FIRST 50 ROWS ONLY;
```

Comparing those results to `DB2BATC.UTL_DATASET_LIST` from step 1 will tell you which one is your real equivalent on EUPAGB.


*******************STORAGE*****************

Short answer: there isn‚Äôt a single ‚ÄúVCAT default‚Äù column in the catalog, but you can get **both**:

1. The ‚Äúreal‚Äù default VCAT (what Db2 uses for SYSDEFLT / catalog data sets), and
2. The **most common VCAT** used by your user objects,

all with catalog queries.

---

## 1Ô∏è‚É£ What is `VCATNAME = '00000001'`?

`'00000001'` (or the hex X'0000000000000001') is just an **internal placeholder** that Db2 uses in some catalog tables instead of the real ICF catalog name. Tools/docs mention that Db2-created data sets can have `VCATNAME = '00000001'` internally. ([techdocs.broadcom.com][1])

The *real* VCAT for those objects is:

* The **Catalog Alias ZPARM** (QWP6CATN ‚Äì ‚ÄúCatalog Alias‚Äù) that defines the ICF catalog for Db2 catalog/directory VSAM data sets; ([ibm.com][2])
* Or, for user objects, the VCAT of the **storage group** they are in.

That‚Äôs why your CASE

```sql
CASE WHEN T.VCATNAME = '00000001'
          OR T.VCATNAME = X'0000000000000001'
     THEN 'DB2DQ0A'
     ELSE RTRIM(T.VCATNAME)
END
```

works: on that subsystem, the DSNZPARM ‚ÄúCatalog Alias‚Äù (and the VCAT for SYSDEFLT) is `DB2DQ0A`, so you‚Äôre manually mapping the internal `00000001` -> real catalog name.

You just don‚Äôt want to hardcode it. üëç

---

## 2Ô∏è‚É£ Get the ‚Äúdefault‚Äù VCAT from SYSSTOGROUP (recommended)

For most user data, Db2 uses stogroup **SYSDEFLT** and ‚Äúuses the VCAT name associated with SYSDEFLT as a high-level qualifier for the Db2 data sets for all objects of this storage group‚Äù. ([help.sap.com][3])

So, simplest ‚Äúdefault VCAT‚Äù from catalog:

```sql
SELECT VCATNAME
FROM   SYSIBM.SYSSTOGROUP
WHERE  NAME = 'SYSDEFLT';
```

On your system that should return `DB2DQ0A` (or whatever your default catalog is).

You can then fold that into your query instead of hardcoding:

```sql
,CASE 
   WHEN T.VCATNAME = '00000001'
     OR T.VCATNAME = X'0000000000000001' THEN 
        (SELECT VCATNAME 
           FROM SYSIBM.SYSSTOGROUP 
          WHERE NAME = 'SYSDEFLT')
   ELSE RTRIM(T.VCATNAME)
 END AS VCATNAME_RESOLVED
```

(That scalar subselect is constant for the whole query, so performance is fine.)

---

## 3Ô∏è‚É£ See which VCAT is used ‚Äúby majority of objects‚Äù

If you just want to confirm what the dominant VCAT is in the system, you can count per VCAT directly:

```sql
SELECT T.VCATNAME,
       COUNT(*) AS OBJ_COUNT
FROM   SYSIBM.SYSTABLEPART T   -- or SYSINDEXPART, or both in a UNION
GROUP BY T.VCATNAME
ORDER BY OBJ_COUNT DESC;
```

You‚Äôll see something like:

```text
VCATNAME   OBJ_COUNT
---------  ---------
00000001   1200   <- internal placeholder (catalog/directory)
DB2DQ0A     950   <- your main user VCAT
...
```

If you want to ignore the placeholder in this overview:

```sql
SELECT T.VCATNAME,
       COUNT(*) AS OBJ_COUNT
FROM   SYSIBM.SYSTABLEPART T
WHERE  T.VCATNAME <> '00000001'
GROUP BY T.VCATNAME
ORDER BY OBJ_COUNT DESC;
```

The top row is effectively your ‚Äúmajority VCAT‚Äù.

---

## 4Ô∏è‚É£ Optional: infer the VCAT from your dataset list

Because `DD2_DATASET_LIST` has the real DSN, you *could* also infer the catalog HLQ for objects with `VCATNAME = '00000001'` like this:

```sql
SELECT SUBSTR(D.DSN,1,8) AS VCAT_FROM_DSN,
       COUNT(*)          AS N
FROM   SYSIBM.SYSTABLEPART T
JOIN   DP2D2E0.DD2_DATASET_LIST D
  ON   T.DBNAME    = D.DBNAME
 AND   T.TSNAME    = D.OBJNAME
 AND   T.PARTITION = D.PARTITION
WHERE  T.VCATNAME = '00000001'
GROUP BY SUBSTR(D.DSN,1,8)
ORDER BY N DESC;
```

The top `VCAT_FROM_DSN` you get there should be the same as:

```sql
SELECT VCATNAME
FROM   SYSIBM.SYSSTOGROUP
WHERE  NAME = 'SYSDEFLT';
```

---

### TL;DR for your query

* Use **SYSSTOGROUP.SYSDEFLT.VCATNAME** as your ‚Äúdefault VCAT‚Äù.
* Keep treating `VCATNAME = '00000001'` as ‚Äúuse that default‚Äù.
* If you like, sanity-check by counting VCATs across SYSTABLEPART/SYSINDEXPART.

That should give you a clean, non-hardcoded VCAT in your ‚Äúmissing dataset‚Äù SQL.

[1]: https://techdocs.broadcom.com/us/en/ca-mainframe-software/performance-and-storage/ca-vantage-storage-resource-manager/14-1/configuring/system-parameters/vkgparms-parameter-descriptions.html?utm_source=chatgpt.com "VKGPARMS Parameter Descriptions - TechDocs"
[2]: https://www.ibm.com/docs/en/om-db2/5.5.0?topic=managers-dsnzparm-data-parameters&utm_source=chatgpt.com "DSNZPARM Data Parameters"
[3]: https://help.sap.com/doc/d608ea58ac9d44d7b53e95b679879fdd/CURRENT_VERSION/en-US/db2_administration_guide_v13.pdf?utm_source=chatgpt.com "Database Administration Guide for SAP on IBM Db2 for z/OS"
